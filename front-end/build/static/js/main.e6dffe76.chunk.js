(this.webpackJsonppoly=this.webpackJsonppoly||[]).push([[0],{163:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(51),c=n.n(i),o=n(20),s=n(17),l=n(113),d=(n(104),Object(l.a)("pk_test_51K1MIsFACtENink7Cd60B8Q9f9f8fKK4TPIspvxtioZNRNpSp2r6CLFqdSP12eUsfRlPkyaLNKgB1008gqV13iUu00e1wf3Qoe")),j=n(58),u=(n(163),n(19)),b=n.n(u),h=n(15),m=n(28),f=n(10),p=n(30);function x(e){localStorage.setItem("token",e)}function O(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var v="/api/auth/";function y(){return function(){var e=O();return e?JSON.parse(atob(e.split(".")[1])).user:null}()}function g(){localStorage.removeItem("token")}var w=n(165),P="/api/profiles/",k="http://localhost:3000/";function C(){return fetch("".concat(P,"userProfile"),{headers:{Authorization:"Bearer "+O()},mode:"cors"}).then((function(e){return e.json()}))}function S(e){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(b.a.mark((function e(t){var n,r,a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===t||void 0===t?void 0:t.stripeCustomerId,"sk_test_51K1MIsFACtENink7kKTLFQCgoWw2O1OVl8KWweDKGKCKIfYNFkVthUhUOpMR7XoLNHaIAHWLA1Ax4bMdnxyJT4Zn00qQ7hJpaB",(a=new URLSearchParams).append("account",r),a.append("refresh_url",k+"/login"),a.append("return_url",k),a.append("type","account_onboarding"),e.next=9,w.post("https://api.stripe.com/v1/account_links",a,{headers:{Authorization:"Bearer ".concat("sk_test_51K1MIsFACtENink7kKTLFQCgoWw2O1OVl8KWweDKGKCKIfYNFkVthUhUOpMR7XoLNHaIAHWLA1Ax4bMdnxyJT4Zn00qQ7hJpaB"),"Content-Type":"application/x-www-form-urlencoded"}});case 9:return i=e.sent,e.abrupt("return",null===(n=i.data)||void 0===n?void 0:n.url);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(259),A=n(5),I=n(234),L=n(235),_=n(262),E=n(263),D=n(264),z=n(90),T=n(253),M=n(237),B=n(119),R=n(4),K=240,V=function(e){return{width:K,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},W=function(e){return Object(R.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(9)," + 1px)")})},H=function(e){return{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",display:"none"}},J=Object(A.a)("div")((function(e){var t=e.theme;return Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)})),U=n(1),q=Object(A.a)(F.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(h.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:K,width:"calc(100% - ".concat(K,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})}));function Y(e){var t=e.children,n=e.window,r=Object(I.a)({target:n?n():void 0});return Object(U.jsx)(L.a,{appear:!1,direction:"down",in:!r,children:t})}function Q(e){var t=e.title,n=e.user,r=e.handleLogout,a=e.open,i=e.handleDrawerOpen;return Object(U.jsxs)(_.a,{sx:{display:"flex"},children:[Object(U.jsx)(M.a,{}),Object(U.jsx)(Y,Object(h.a)(Object(h.a)({},e),{},{children:Object(U.jsx)(q,{elevation:0,position:"fixed",color:"primary",open:a,children:Object(U.jsxs)(E.a,{sx:{borderBottom:1,borderColor:"divider"},children:[Object(U.jsx)(D.a,{color:"inherit","aria-label":"open drawer",onClick:i,edge:"start",sx:Object(h.a)({marginRight:"36px"},a&&{display:"none"}),children:Object(U.jsx)(B.a,{fontSize:30,style:{color:"#fff"}})}),Object(U.jsx)(z.a,{component:"h2",variant:"h4",color:"inherit",align:"center",noWrap:!0,sx:{flex:1,letterSpacing:8,fontWeight:600,transform:"translateX(1.2rem)"},children:t}),n?Object(U.jsx)(T.a,{color:"secondary",variant:"contained",size:"small",disableElevation:!0,href:"",onClick:r,children:"Log Out"}):Object(U.jsx)(T.a,{color:"secondary",variant:"contained",size:"small",disableElevation:!0,href:"/signup",children:"Sign up"})]})})}))]})}var $=n(260),G=n(240),X=n(265),Z=n(123),ee=n.n(Z),te=n(122),ne=n.n(te),re=n(124),ae=n.n(re),ie=n(126),ce=n.n(ie),oe=n(125),se=n.n(oe),le=n(131),de=Object(le.a)({typography:{fontFamily:"Quicksand",h6:{fontWeight:600,fontSize:"1.25rem",lineHeight:2,letterSpacing:".05rem"}},shape:{borderRadius:20},palette:{primary:{main:"#6172d0",light:"#f0f2ff",dark:"#283FC0"},secondary:{main:"#E26372",light:"#ffe6e9",dark:"#F3A3AD"}},zIndex:{speedDial:1250}}),je=n(249),ue=n(238),be=n(239),he=function(e){var t=e.keyName,n=e.url,r=e.child;return Object(U.jsxs)(je.a,{button:!0,component:o.b,to:n,children:[Object(U.jsx)(ue.a,{color:"primary.main",children:r}),Object(U.jsx)(be.a,{primary:t,sx:{color:"".concat(de.palette.primary.dark)}})]},t)},me="/api/payments";function fe(e){return fetch("".concat(me,"/").concat(e),{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()}))}var pe=n(254),xe=n(98),Oe=n.n(xe),ve=function(e){return Oe()(e).format("DD MMM, YYYY")},ye=function(e){return Oe()(e).format("MM-DD")},ge=function(e){var t,n=e.userProfile,r=e.payment,a=ye(r.created);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(G.a,{light:!0,sx:{width:"90%",my:1.5}}),Object(U.jsxs)(_.a,{sx:{display:"flex",gap:"1rem"},children:[(null===(t=r.paymentFrom)||void 0===t?void 0:t._id)===(null===n||void 0===n?void 0:n._id)?Object(U.jsxs)(z.a,{variant:"subtitle2",children:[" Your paid  ",r.paymentTo.firstName," ",r.paymentTo.lastName,"  $ ",r.amount]}):Object(U.jsxs)(z.a,{variant:"subtitle2",children:[" ",r.paymentFrom.firstName," ",r.paymentFrom.lastName," paid you $ ",r.amount," "]}),Object(U.jsx)(z.a,{variant:"body2",sx:{color:"text.secondary"},children:a})]}),Object(U.jsx)(_.a,{sx:{display:"flex",justifyContent:"space-between"},children:Object(U.jsx)(z.a,{variant:"body2",color:"primary",children:r.note})})]})},we=function(e){var t=e.user,n=e.userProfile,a=e.handleVerifyAccount,i=e.verificationLink,c=ve(t.createdAt),o=Object(r.useState)([]),s=Object(f.a)(o,2),l=s[0],d=s[1];return Object(r.useEffect)((function(){fetch("".concat(me,"/profile"),{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()})).then((function(e){return d(e)}))}),[]),Object(r.useEffect)((function(){a(n)}),[n]),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{sx:{mx:3,my:6,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(U.jsx)(pe.a,{className:"avatar",alt:t.firstName,sx:{width:"5rem",height:"5rem",mb:2,color:"primary"}}),Object(U.jsxs)(z.a,{variant:"h6",children:[t.firstName," ",t.lastName]}),(null===n||void 0===n?void 0:n.stripeOnboard)?Object(U.jsxs)(z.a,{variant:"subtitle2",children:["Member since ",c]}):Object(U.jsx)(T.a,{href:i,children:"Verify with Stripe"}),Object(U.jsx)(G.a,{sx:{width:"100%",my:2}}),Object(U.jsx)(z.a,{variant:"subtitle2",children:"Recent Transactions:"}),l.map((function(e){return Object(U.jsx)(ge,{userProfile:n,payment:e},e._id)}))]})})},Pe=Object(A.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(h.a)(Object(h.a)({width:K,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object(h.a)(Object(h.a)({},V(t)),{},{"& .MuiDrawer-paper":V(t)})),!n&&Object(h.a)(Object(h.a)({},W(t)),{},{"& .MuiDrawer-paper":W(t)}))})),ke=Object(A.a)($.a)((function(e){var t=e.theme,n=e.open;return Object(h.a)(Object(h.a)({width:K,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},!n&&Object(h.a)(Object(h.a)({},V(t)),{},{"& .MuiDrawer-paper":V(t)})),n&&Object(h.a)(Object(h.a)({},H(t)),{},{"& .MuiDrawer-paper":H(t)}))}));function Ce(e){var t=e.user,n=e.userProfile,r=e.verificationLink,a=e.open,i=e.handleDrawerClose,c=e.handleVerifyAccount,o=e.children;return Object(U.jsxs)(_.a,{sx:{display:"flex"},children:[Object(U.jsx)(M.a,{}),Object(U.jsxs)(Pe,{elevation:0,variant:"permanent",open:a,children:[Object(U.jsx)(J,{sx:{backgroundColor:"primary"},children:a?Object(U.jsx)(D.a,{onClick:i,children:"rtl"===de.direction?Object(U.jsx)(ne.a,{}):Object(U.jsx)(ee.a,{})}):Object(U.jsx)(D.a,{})}),Object(U.jsx)(G.a,{}),Object(U.jsxs)(X.a,{children:[Object(U.jsx)(he,{keyName:"USERS",url:"/users",child:Object(U.jsx)(ae.a,{fontSize:"large",style:{fill:"".concat(de.palette.primary.main)}})}),Object(U.jsx)(he,{keyName:"PAYMENTS",url:"/payments",child:Object(U.jsx)(se.a,{fontSize:"large",style:{fill:"".concat(de.palette.primary.main)}})}),Object(U.jsx)(he,{keyName:"NOTIFICATIONS",url:"/notifications",child:Object(U.jsx)(ce.a,{fontSize:"large",style:{fill:"".concat(de.palette.primary.main)}})})]}),Object(U.jsx)(G.a,{}),a&&t?Object(U.jsx)(we,{user:t,userProfile:n,handleVerifyAccount:c,verificationLink:r}):Object(U.jsx)(U.Fragment,{})]}),Object(U.jsxs)(_.a,{component:"main",sx:{flexGrow:1,p:3},children:[Object(U.jsx)(J,{}),o]}),t?Object(U.jsxs)(ke,{elevation:0,anchor:"right",open:a,variant:"permanent",sx:{flexGrow:1,p:3,width:K},children:[Object(U.jsx)(J,{}),Object(U.jsx)(we,{user:t,userProfile:n,handleVerifyAccount:c,verificationLink:r})]}):Object(U.jsx)(U.Fragment,{})]})}var Se=n(255),Ne=n(256),Fe=n(245),Ae=n(128),Ie=n(127),Le=[{icon:Object(U.jsx)(D.a,{component:o.b,to:"/users",children:Object(U.jsx)(Ie.a,{fontSize:23,style:{fill:"".concat(de.palette.primary.dark)}})}),name:"Add Friend"},{icon:Object(U.jsx)(D.a,{component:o.b,to:"/addpayment",children:Object(U.jsx)(Ae.a,{fontSize:23,style:{fill:"".concat(de.palette.primary.dark)}})}),name:"Add Payment"}];function _e(){return Object(U.jsx)(Se.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},color:"black",icon:Object(U.jsx)(Ne.a,{}),children:Le.map((function(e){return Object(U.jsx)(Fe.a,{icon:e.icon,tooltipTitle:e.name},e.name)}))})}var Ee=n(250),De=function(e){var t=Object(s.g)(),n=Object(r.useState)({firstName:"",lastName:"",email:"",password:"",passwordConf:""}),a=Object(f.a)(n,2),i=a[0],c=a[1],l=function(t){e.setMessage(""),c(Object(h.a)(Object(h.a)({},i),{},Object(R.a)({},t.target.name,t.target.value)))},d=function(){var n=Object(m.a)(b.a.mark((function n(r){var a,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.setMessage,c=e.handleSignupOrLogin,r.preventDefault(),n.prev=2,n.next=5,o=i,fetch("".concat(v,"/signup"),{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){if(e.token)return e;throw new Error(e.err)})).then((function(e){x(e.token)})).catch((function(e){console.log(e)}));case 5:c(),t("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a(n.t0.message);case 12:case"end":return n.stop()}var o}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}(),j=i.firstName,u=i.lastName,p=i.email,O=i.password,y=i.passwordConf;return Object(U.jsxs)("form",{autoComplete:"off",onSubmit:d,children:[Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"text",autoComplete:"off",id:"firstName",value:j,name:"firstName",onChange:l,label:"First Name",variant:"outlined"})}),Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"text",autoComplete:"off",id:"lastName",value:u,name:"lastName",onChange:l,label:"Last Name",variant:"outlined"})}),Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"text",autoComplete:"off",id:"email",value:p,name:"email",onChange:l,label:"Email",variant:"outlined"})}),Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"password",autoComplete:"off",id:"password",value:O,name:"password",onChange:l,label:"Password",variant:"outlined"})}),Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"password",autoComplete:"off",id:"confirm",value:y,name:"passwordConf",onChange:l,label:"Confirm Password",variant:"outlined"})}),Object(U.jsxs)("div",{children:[Object(U.jsx)(T.a,{style:{margin:".5rem"},color:"primary",variant:"outlined",type:"submit",disabled:function(){var e=i.firstName,t=i.lastName,n=i.email,r=i.password,a=i.passwordConf;return!(e&&t&&n&&r===a&&""!==r)}(),children:"Sign Up"}),Object(U.jsx)(T.a,{style:{margin:".5rem"},component:o.b,to:"/",color:"primary",variant:"outlined",children:"Cancel"})]})]})},ze=function(e){var t=e.history,n=e.handleSignupOrLogin,a=e.userProfile,i=Object(r.useState)(""),c=Object(f.a)(i,2),o=c[0],s=c[1];return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(_.a,{mr:5,my:3,p:5,sx:{display:"flex"},children:Object(U.jsxs)(_.a,{sx:{margin:"auto",textAlign:"center"},children:[Object(U.jsx)(z.a,{variant:"h5",color:"primary",sx:{letterSpacing:8},children:"SIGN UP"}),Object(U.jsx)(z.a,{variant:"body1",color:"primary",children:o}),Object(U.jsx)(_.a,{mx:2,my:3,children:Object(U.jsx)(G.a,{})}),Object(U.jsx)(De,{history:t,handleSignupOrLogin:n,message:o,setMessage:s,userProfile:a}),Object(U.jsxs)("div",{children:[Object(U.jsx)(z.a,{variant:"subtitle1",color:"black",children:"Already have an account? Login"}),Object(U.jsx)(T.a,{style:{display:"inline",textDecoration:"underline",fontWeight:600},color:"secondary",href:"/login",children:"HERE"})]})]})})})},Te=function(e){var t=Object(r.useState)({email:"",password:""}),n=Object(f.a)(t,2),a=n[0],i=n[1],c=Object(s.g)(),l=function(t){e.setMessage(""),i(Object(h.a)(Object(h.a)({},a),{},Object(R.a)({},t.target.name,t.target.value)))},d=function(){var t=Object(m.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.handleSignupOrLogin,n.preventDefault(),t.prev=2,t.next=5,i=a,fetch(v+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(i)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){return x(e.token)}));case 5:r(),c("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),alert("Invalid Credentials");case 12:case"end":return t.stop()}var i}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),j=a.email,u=a.password;return Object(U.jsxs)("form",{autoComplete:"off",onSubmit:d,children:[Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"text",autoComplete:"off",id:"email",value:j,name:"email",onChange:l,label:"Email",variant:"outlined"})}),Object(U.jsx)("div",{style:{margin:".8rem"},children:Object(U.jsx)(Ee.a,{type:"password",autoComplete:"off",id:"password",value:u,name:"password",onChange:l,label:"Password",variant:"outlined"})}),Object(U.jsxs)("div",{children:[Object(U.jsx)(T.a,{style:{margin:".5rem"},color:"primary",variant:"outlined",type:"submit",disabled:function(){var e=a.email,t=a.password;return!(e&&""!==t)}(),children:"Login"}),Object(U.jsx)(T.a,{style:{margin:".5rem"},component:o.b,to:"/",color:"primary",variant:"outlined",children:"Cancel"})]})]})},Me=function(e){var t=e.history,n=e.handleSignupOrLogin,a=Object(r.useState)(""),i=Object(f.a)(a,2),c=i[0],o=i[1];return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(_.a,{mr:5,my:3,p:5,sx:{display:"flex"},children:Object(U.jsxs)(_.a,{sx:{margin:"auto",textAlign:"center"},children:[Object(U.jsx)(z.a,{variant:"h5",color:"primary",sx:{letterSpacing:8},children:"LOG IN"}),Object(U.jsx)(z.a,{variant:"body1",color:"primary",children:c}),Object(U.jsx)(_.a,{mx:5,my:3,children:Object(U.jsx)(G.a,{})}),Object(U.jsx)(Te,{history:t,handleSignupOrLogin:n,message:c,setMessage:o}),Object(U.jsx)(z.a,{variant:"subtitle1",color:"black",children:"Don't have an account yet? Sign up"}),Object(U.jsx)("div",{children:Object(U.jsx)(T.a,{style:{display:"inline",textDecoration:"underline",fontWeight:600},color:"secondary",href:"/signup",children:"HERE"})})]})})})},Be=function(e){var t=e.user,n=e.userProfile;return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("main",{children:[Object(U.jsxs)("h1",{children:["hello, ",t?t.firstName:"friend"]}),!t||(null===n||void 0===n?void 0:n.stripeOnboard)?Object(U.jsx)(U.Fragment,{}):Object(U.jsx)("h1",{children:"To transfer money between freinds you need to verify with stripe"})]})})},Re=function(e){e.user;var t=e.userProfile,n=e.handleVerifyAccount,a=e.verificationLink;return Object(r.useEffect)((function(){n(t)}),[t]),Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("main",{children:(null===t||void 0===t?void 0:t.stripeOnboard)?Object(U.jsx)("a",{href:"/addpayment",children:"Add a payment"}):Object(U.jsx)("a",{href:a,children:"Verify with Stripe"})})})},Ke=n(258),Ve=n(270),We=n(129),He=n.n(We),Je=n(130),Ue=n.n(Je),qe=function(e){var t,n,r=e.profile,a=e.userProfile,i=e.handleAddFriend,c=e.handleRemoveFriend,o=ve(r.createdAt);return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Ke.a,{item:!0,xs:12,md:6,lg:4,children:Object(U.jsx)(_.a,{m:3,sx:{width:"15rem",margin:"auto"},children:Object(U.jsx)(Ve.a,{children:Object(U.jsxs)(_.a,{m:1,pt:2,sx:{justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(U.jsx)(pe.a,{className:"avatar",alt:r.firstName,src:r.avatar,sx:{width:"3.5rem",height:"3.5rem",mb:1.5}}),Object(U.jsxs)(z.a,{variant:"h6",children:[r.firstName," ",r.lastName]}),Object(U.jsxs)(z.a,{variant:"body2",children:["Member since ",o]}),Object(U.jsx)(G.a,{}),Object(U.jsxs)(_.a,{m:1,children:[!((null===a||void 0===a?void 0:a._id)===r._id)&&!(null===a||void 0===a||null===(t=a.friends)||void 0===t?void 0:t.some((function(e){return e._id===r._id})))&&Object(U.jsx)(T.a,{size:"small",variant:"contained",disableElevation:!0,color:"secondary",startIcon:Object(U.jsx)(He.a,{}),onClick:function(){return i(r._id)},children:" Friend"}),!((null===a||void 0===a?void 0:a._id)===r._id)&&(null===a||void 0===a||null===(n=a.friends)||void 0===n?void 0:n.some((function(e){return e._id===r._id})))&&Object(U.jsx)(T.a,{size:"small",variant:"contained",disableElevation:!0,startIcon:Object(U.jsx)(Ue.a,{}),onClick:function(){return c(r._id)},children:" Unfriend"})]})]})})})})})},Ye=function(e){var t=e.userProfile,n=e.handleAddFriend,a=e.handleRemoveFriend,i=Object(r.useState)([]),c=Object(f.a)(i,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){fetch(P,{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()})).then((function(e){return s(e)}))}),[]),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{mx:5,my:3,children:[Object(U.jsx)(z.a,{variant:"h4",children:"All Users"}),Object(U.jsx)(_.a,{my:3,children:Object(U.jsx)(Ke.a,{container:!0,spacing:3,children:o.length?Object(U.jsx)(U.Fragment,{children:o.map((function(e){return Object(U.jsx)(qe,{profile:e,userProfile:t,handleAddFriend:n,handleRemoveFriend:a},e._id)}))}):Object(U.jsx)("p",{children:"An error occured"})})})]})})},Qe=n(269),$e=n(251),Ge=n(267),Xe=n(271),Ze=n(272),et=n(246),tt=function(e){var t=e.userProfile,n=Object(s.g)(),a=Object(r.useState)({amount:"",person:"",note:"",methodIsPay:!0}),i=Object(f.a)(a,2),c=i[0],l=i[1],d=function(e){return function(t){l(Object(h.a)(Object(h.a)({},c),{},Object(R.a)({},e,t.target.value)))}},j=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{(r=c,fetch(me,{method:"POST",headers:{Authorization:"Bearer ".concat(O()),"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()}))).then((function(e){(null===e||void 0===e?void 0:e.methodIsPay)?n("/checkout/".concat(null===e||void 0===e?void 0:e._id)):n("/")}))}catch(a){console.log(a)}case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),u=c.amount,p=c.person,x=c.note,v=function(){return!(parseInt(u)&&p)};return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{mx:6,my:3,children:[Object(U.jsx)(T.a,{component:o.b,to:"/",color:"primary",variant:"text",children:"Cancel"}),Object(U.jsx)(_.a,{sx:{margin:"auto",my:3,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(U.jsxs)("form",{autoComplete:"off",onSubmit:j,children:[Object(U.jsxs)(Qe.a,{fullWidth:!0,sx:{m:1},variant:"standard",children:[Object(U.jsx)($e.a,{htmlFor:"amount",children:"Amount"}),Object(U.jsx)(Ge.a,{id:"amount",value:u,onChange:d("amount"),startAdornment:Object(U.jsx)(Xe.a,{position:"start",children:"$"})})]}),Object(U.jsxs)(Qe.a,{fullWidth:!0,sx:{m:1},variant:"standard",children:[Object(U.jsx)($e.a,{htmlFor:"name",children:"Name"}),Object(U.jsx)(et.a,{labelId:"label",id:"standard",value:p,onChange:function(e){l(Object(h.a)(Object(h.a)({},c),{},{person:e.target.value}))},label:"Name",children:null===t||void 0===t?void 0:t.friends.map((function(e){return Object(U.jsxs)(Ze.a,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.firstName,"  ",null===e||void 0===e?void 0:e.lastName," "]})}))})]}),Object(U.jsxs)(Qe.a,{fullWidth:!0,sx:{m:1},variant:"standard",children:[Object(U.jsx)($e.a,{htmlFor:"name",children:"Note"}),Object(U.jsx)(Ge.a,{id:"name",value:x,onChange:d("note")})]}),Object(U.jsx)(T.a,{color:"secondary",variant:"outlined",type:"submit",name:"pay",sx:{m:2},onClick:function(){return l(Object(h.a)(Object(h.a)({},c),{},{methodIsPay:!0}))},disabled:v(),children:"Pay"}),Object(U.jsx)(T.a,{color:"primary",variant:"outlined",type:"submit",name:"request",onClick:function(){return l(Object(h.a)(Object(h.a)({},c),{},{methodIsPay:!1}))},disabled:v(),children:"Request"})]})})]})})},nt=function(e){var t,n,r,a,i,c,o=e.payment;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Ke.a,{item:!0,xs:12,md:6,lg:4,children:Object(U.jsx)(_.a,{m:3,sx:{width:"16rem",margin:"auto"},children:Object(U.jsxs)(Ve.a,{sx:{display:"flex",alignItems:"center",p:2},children:[Object(U.jsx)(pe.a,{alt:null===(t=o.paymentFrom)||void 0===t?void 0:t.firstName,src:null===(n=o.paymentFrom)||void 0===n?void 0:n.avatar,sx:{bgcolor:"secondary.main",width:"3rem",height:"3rem"}}),Object(U.jsxs)(_.a,{ml:2,children:[Object(U.jsxs)(z.a,{variant:"h6",children:[null===(r=o.paymentFrom)||void 0===r?void 0:r.firstName," ",null===(a=o.paymentFrom)||void 0===a?void 0:a.lastName]},o._id),Object(U.jsxs)(z.a,{variant:"subtitle2",children:["paid ",null===(i=o.paymentTo)||void 0===i?void 0:i.firstName," ",null===(c=o.paymentTo)||void 0===c?void 0:c.lastName," $ ",o.amount,"."]},o._id),Object(U.jsx)(_.a,{mt:1,children:Object(U.jsx)(z.a,{variant:"body2",color:"secondary",children:o.note},o._id)})]})]})})})})},rt=function(e){e.userProfile;var t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){fetch(me,{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[]),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{mx:5,my:3,children:[Object(U.jsx)(z.a,{variant:"h4",children:"All Payments:"}),Object(U.jsx)(_.a,{my:3,children:Object(U.jsx)(Ke.a,{container:!0,spacing:3,children:a.map((function(e){return Object(U.jsx)(nt,{payment:e})}))})})]})})},at=function(e){var t=e.payment,n=ye(t.created);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(G.a,{}),Object(U.jsxs)(_.a,{sx:{display:"flex",m:1,justifyContent:"space-between",alignItems:"center"},children:[Object(U.jsxs)(_.a,{children:[t.methodIsPay?Object(U.jsxs)(z.a,{variant:"subtitle1",children:[" ",t.initiator.firstName," ",t.initiator.lastName," wants to pay you $ ",t.amount," "]},t._id):Object(U.jsxs)(z.a,{variant:"subtitle1",children:[" ",t.initiator.firstName," ",t.initiator.lastName," wants to request $ ",t.amount," from you "]},t._id),Object(U.jsx)(z.a,{variant:"body2",color:"primary",children:n}),Object(U.jsxs)(z.a,{variant:"body2",sx:{color:"text.secondary"},children:["Note: ",t.note]})]}),t.methodIsPay?Object(U.jsx)(T.a,{children:"OK"}):Object(U.jsx)(T.a,{component:o.b,to:"/checkout/".concat(t._id),color:"primary",variant:"text",sx:{mx:2},children:"Complete"})]})]})},it=function(e){var t=e.payment,n=e.handleDeletePayment,r=ye(t.created);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(G.a,{}),Object(U.jsxs)(_.a,{sx:{display:"flex",m:1,justifyContent:"space-between",alignItems:"center"},children:[Object(U.jsxs)(_.a,{children:[t.methodIsPay?Object(U.jsxs)(z.a,{variant:"subtitle1",children:[" Your request to pay ",t.person.firstName," ",t.person.lastName,"  $ ",t.amount," is incomplete"]},t._id):Object(U.jsxs)(z.a,{variant:"subtitle1",children:[" Your request to ",t.person.firstName," ",t.person.lastName," is still pending "]},t._id),Object(U.jsx)(z.a,{variant:"body2",color:"primary",children:r}),Object(U.jsxs)(z.a,{variant:"body2",sx:{color:"text.secondary"},children:["Note: ",t.note]})]}),t.methodIsPay?Object(U.jsx)(T.a,{component:o.b,to:"/checkout/".concat(t._id),color:"primary",disableElevation:!0,variant:"contained",children:"Complete"}):Object(U.jsx)(T.a,{onClick:function(){return n(t._id)},color:"secondary",disableElevation:!0,variant:"contained",children:"Delete"})]})]})},ct=function(e){e.userProfile;var t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)([]),o=Object(f.a)(c,2),s=o[0],l=o[1],d=function(e){(function(e){return fetch("".concat(me,"/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()}))})(e).then((function(e){l(s.filter((function(t){return t._id!==e._id})))}))};return Object(r.useEffect)((function(){fetch("".concat(me,"/incomplete"),{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[]),Object(r.useEffect)((function(){fetch("".concat(me,"/pending"),{headers:{Authorization:"Bearer ".concat(O())}}).then((function(e){return e.json()})).then((function(e){return l(e)}))}),[]),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{mx:5,my:3,children:[Object(U.jsx)(z.a,{variant:"h4",children:"Incompelte Requests:"}),Object(U.jsxs)(_.a,{mx:5,my:3,children:[0==a.length?Object(U.jsx)(z.a,{variant:"body2",children:"Nothing here yet"}):Object(U.jsx)(U.Fragment,{}),a.map((function(e){return Object(U.jsx)(at,{payment:e})}))]}),Object(U.jsx)(z.a,{variant:"h4",children:"Pending Requests:"}),Object(U.jsxs)(_.a,{ml:5,mr:5,my:3,children:[0==s.length?Object(U.jsx)(z.a,{variant:"body2",children:"Nothing here yet"}):Object(U.jsx)(U.Fragment,{}),s.map((function(e){return Object(U.jsx)(it,{payment:e,handleDeletePayment:d})}))]})]})})},ot=function(e){e.userProfile;var t=Object(s.g)(),n=Object(j.useStripe)(),r=Object(j.useElements)(),a=Object(s.h)().id,i=function(){var e=Object(m.a)(b.a.mark((function e(i){var c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),n&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fe(a);case 5:return c=e.sent,console.log(c),e.next=9,n.confirmCardPayment(c.stripePaymentIntentId,{payment_method:{card:r.getElement(j.CardElement),billing_details:{name:"Poly Transactions"}}});case 9:(o=e.sent).error?console.log(o.error.message):"succeeded"===o.paymentIntent.status&&(c.completed=!0,s=c,fetch("".concat(me,"/").concat(s._id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(O()),"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})),t("/notifications"));case 11:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(_.a,{mx:6,my:3,children:[Object(U.jsx)(T.a,{component:o.b,to:"/",color:"primary",variant:"text",children:"Cancel"}),Object(U.jsx)(_.a,{sx:{margin:"auto",my:3},children:Object(U.jsxs)("form",{autoComplete:"off",onSubmit:i,children:[Object(U.jsx)(j.CardElement,{}),Object(U.jsx)(T.a,{disabled:!n,variant:"contained",type:"submit",sx:{my:5},children:"Confirm Payment"})]})})]})})},st=function(){return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("main",{children:[Object(U.jsx)("h1",{children:"404 - Page Not found"}),Object(U.jsx)(T.a,{component:o.b,to:"/",color:"primary",variant:"text",children:"Home"})]})})},lt=n(252);var dt=function(){var e,t=Object(p.d)(),n=Object(s.g)(),i=Object(r.useState)({user:y(),userProfile:null,verificationLink:null}),c=Object(f.a)(i,2),o=c[0],l=c[1],d=a.a.useState(!1),j=Object(f.a)(d,2),u=j[0],x=j[1];Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.userProfile){e.next=5;break}return e.next=3,C();case 3:t=e.sent,l(Object(h.a)(Object(h.a)({},o),{},{userProfile:t}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var v=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.t1=y(),e.next=4,C();case 4:e.t2=e.sent,e.t3={user:e.t1,userProfile:e.t2,verificationLink:null},(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:n=e.sent,l(Object(h.a)(Object(h.a)({},o),{},{verificationLink:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,fetch("".concat(P,"friend/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer "+O()}}).then((function(e){return e.json()}));case 2:n=e.sent,l(Object(h.a)(Object(h.a)({},o),{},{userProfile:n}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,fetch("".concat(P,"unfriend/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer "+O()}}).then((function(e){return e.json()}));case 2:n=e.sent,l(Object(h.a)(Object(h.a)({},o),{},{userProfile:n}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)(lt.a,{theme:de,children:[Object(U.jsx)(Q,{title:"POLY",user:o.user,handleLogout:function(){g(),l({user:null,userProfile:null,verificationLink:null}),n("/")},open:u,handleDrawerOpen:function(){x(!0)}}),Object(U.jsx)(Ce,{user:o.user,userProfile:o.userProfile,open:u,handleDrawerClose:function(){x(!1)},handleVerifyAccount:w,verificationLink:o.verificationLink,children:Object(U.jsxs)(s.d,{children:[Object(U.jsx)(s.b,{path:"*",element:Object(U.jsx)(st,{})}),Object(U.jsx)(s.b,{path:"/",element:Object(U.jsx)(Be,{user:o.user,userProfile:o.userProfile})}),Object(U.jsx)(s.b,{path:"/signup",element:Object(U.jsx)(ze,{history:t,handleSignupOrLogin:v,userProfile:o.userProfile})}),Object(U.jsx)(s.b,{path:"/login",element:Object(U.jsx)(Me,{history:t,handleSignupOrLogin:v})}),Object(U.jsx)(s.b,{path:"/stripeauth",element:o.user?Object(U.jsx)(Re,{user:o.user,userProfile:o.userProfile,handleVerifyAccount:w,verificationLink:o.verificationLink}):Object(U.jsx)(s.a,{to:"/login"})}),Object(U.jsx)(s.b,{path:"/users",element:o.user?Object(U.jsx)(Ye,{userProfile:o.userProfile,handleAddFriend:k,handleRemoveFriend:N}):Object(U.jsx)(s.a,{to:"/login"})}),Object(U.jsx)(s.b,{path:"/addpayment",element:(null===(e=o.userProfile)||void 0===e?void 0:e.stripeOnboard)?Object(U.jsx)(tt,{userProfile:o.userProfile}):Object(U.jsx)(s.a,{to:"/"})}),Object(U.jsx)(s.b,{path:"/payments",element:o.user?Object(U.jsx)(rt,{userProfile:o.userProfile}):Object(U.jsx)(s.a,{to:"/login"})}),Object(U.jsx)(s.b,{path:"/checkout/:id",element:o.user?Object(U.jsx)(ot,{userProfile:o.userProfile}):Object(U.jsx)(s.a,{to:"/login"})}),Object(U.jsx)(s.b,{path:"/notifications",element:o.user?Object(U.jsx)(ct,{userProfile:o.userProfile}):Object(U.jsx)(s.a,{to:"/login"})})]})}),o.user?Object(U.jsx)(_e,{}):Object(U.jsx)(U.Fragment,{})]})};c.a.render(Object(U.jsx)(o.a,{children:Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(j.Elements,{stripe:d,children:Object(U.jsx)(s.d,{children:Object(U.jsx)(s.b,{path:"/*",element:Object(U.jsx)(dt,{})})})})})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.e6dffe76.chunk.js.map